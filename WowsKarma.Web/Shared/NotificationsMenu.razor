@inherits ComponentBaseAuth

<ul class="navbar-nav">
	<li class="nav-item">
		<div class="dropdown">
			<button class="btn btn-link text-light dropdown-toggle" type="button" id="notifications-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" @onclick=ToggleOpened>
				<i class="bi bi-bell@(Notifications?.Any() is true ? "-fill" : null)"></i>

				@if (Notifications?.Count is int count and not 0)
				{
					<span class="badge bg-primary rounded-pill ml-2">@count</span>
				}
			</button>

			<div class="dropdown-menu dropdown-menu-right @(opened ? "show" : null) p-2" aria-labelledby="notifications-dropdown">
				<h5 class="mx-3 mt-2 mb-3">Notifications</h5>

				@if (Notifications?.Count is 0)
				{

				}
				else
				{
					<div class="flex-column">
						<Virtualize TItem=INotification Items=Notifications Context=notification>
							<Notification Model=notification OnDismissClicked=AcknowledgeNotificationAsync />
						</Virtualize>
					</div>
				}
			</div>
		</div>

	</li>
</ul>

@code {
	private bool opened = false;

	private void ToggleOpened() => opened = !opened;
}
