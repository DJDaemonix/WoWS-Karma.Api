<ng-template #loading><h3 class="text-info">Loading...</h3></ng-template>

<ng-container *ngIf="post$ | async as post else loading">
  <h1>View Post</h1>
  <p class="lead">Post ID : <span class="ml-3 text-monospace">{{post.id}}</span></p>

  <div class="my-5">
    <div class="row">
      <div class="col-lg-4">
        <app-post [post]="post" [postDisplayType]="'neutral'"></app-post>
      </div>
    </div>
  </div>

  <div *ngIf="post.replay as replay">
    <h2>Replay
      <a class="btn btn-primary btn-lg ms-5 px-4" href="{{post.replay.downloadUri}}">Download Replay</a>
    </h2>

    <div class="row justify-content-between my-3">
      <div class="col-lg-7 mb-5 order-lg-5">
        <h4 class="my-3">Teams Roster</h4>

        <replay-team-roster [replay]="replay" [authorId]="post.author!.id!" [playerId]="post.player!.id!">
        </replay-team-roster>
      </div>

      <div class="col-lg-5 mb-5">
        <h4 class="my-3">Chat Messages</h4>

        <replay-chat-log [replay]="replay" [authorId]="post.author!.id!" [playerId]="post.player!.id!">
        </replay-chat-log>
      </div>
    </div>
  </div>
</ng-container>
